{% extends 'header.html' %}
{% load static %}
{% load humanize %}

{% block content %}
    <head role="expense-manager">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="{% static '/css/main.css' %}"/>
        <script src="https://unpkg.com/ag-grid-community/dist/ag-grid-community.min.noStyle.js"></script>
        {% block scripts %}
            <script src="{% static '/js/main.js' %}"></script>
        {% endblock %}
    </head>
    <body>
    <h1> Expense Manager </h1>
    </body>
    <section>
        <div style="margin-right:100px" id="expense-alerts">
            <table id="expense-table" style="width:100%;"
                   class="table table-striped table-bordered table-sm table-space">
                <thead class="thead-dark">
                <tr>
                    <th scope="col">Project</th>
                    <th scope="col">User Name</th>
                    <th scope="col">Expense Type</th>
                    <th scope="col">Status</th>
                    <th scope="col">Expense Date</th>
                    <th scope="col">Total Cost</th>
                    <th scope="col">Approve</th>
                </tr>
                </thead>
                <tbody>
                {% for expense in expenses %}
                    <tr>
                        <td>{{ expense.project }}</td>
                        <td>{{ expense.userID }}</td>
                        <td>{{ expense.expenseType }}</td>
                        <td data-toggle="collapse" data-target="#accordion{{ expense.id }}" class="clickable">
                            {{ expense.isApproved }}
                            <button type="button" class="btn btn-link btn-sm" role="button"
                                    aria-label="accordion{{ expense.id }}">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                     class="bi bi-chevron-down" viewBox="0 0 16 16">
                                    <path fill-rule="evenodd"
                                          d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>
                                </svg>
                            </button>
                        </td>
                        <td>{{ expense.expenseDate }}</td>
                        <td>${{ expense.expenseTotal|floatformat:2|intcomma }}</td>
                        <td>
                            <button id="liveAlertBtn{{ expense.id }}" type="button" class="btn btn-success btn-sm btn-space">Approve</button>
                            <button type="button" class="btn btn-danger btn-sm m-0">Decline</button>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="3">
                            <div id="accordion{{ expense.id }}" class="collapse" aria-hidden="true">
                                Summary of the Expense
                            </div>
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </section>

    {# Page Pagination #}
    <nav aria-label="...">
        <ul class="pagination justify-content-center">
            <li class="page-item disabled">
                <a class="page-link">Previous</a>
            </li>
            <li class="page-item active" aria-current="page">
                <a class="page-link" href="#">1</a></li>
            <li class="page-item">
                <a class="page-link" href="#">2</a></li>
            <li class="page-item">
                <a class="page-link" href="#">3</a></li>
            <li class="page-item">
                <a class="page-link" href="#">Next</a></li>
        </ul>
    </nav>
{% endblock %}
